<?xml version='1.0' encoding='utf-8' ?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
		<title>Server File API</title>
		<link type="text/css" rel="stylesheet" href="../../../book.css"/>
	</head>
	<body>
		<table class="navigation" style="width: 100%;" border="0" summary="navigation">
			<tr>
				<th style="width: 100%" align="center" colspan="3">Server File API</th>
			</tr>
			<tr>
				<td style="width: 20%" align="left"></td>
				<td style="width: 60%" align="center"></td>
				<td style="width: 20%" align="right">
					<a href="JSON-representations.html" title="JSON representations">
						<img alt="Next" border="0" src="../../../images/next.gif"/>
					</a>
				</td>
			</tr>
			<tr>
				<td style="width: 20%" align="left" valign="top"></td>
				<td style="width: 60%" align="center"></td>
				<td style="width: 20%" align="right" valign="top">JSON representations</td>
			</tr>
		</table><hr/>
		<p>The File API is a general-purpose web server API for browsing and manipulating files and directories over HTTP. This API is much simpler and less powerful than 
			<a href="http://tools.ietf.org/html/rfc4918" target="orion_external">WebDAV</a>. Notably it lacks any capabilities for locking and employs only the basic GET/PUT/POST HTTP methods. It also uses JSON as the default representation rather than XML. This makes the API easier for servers to implement and for JavaScript clients to use, but may not be suitable for all applications.
		</p>
		<h2 id="Actions_on_files">Actions on files</h2>
		<h3 id="Getting_file_contents">Getting file contents</h3>
		<p>{{Orion/ServerAPI
			| method = GET
			| overview = To retrieve the contents of a file, send a GET request to the file resource's 
			<a href="#location">location</a>.
			| reqhead = /file/MyProj/myfile.txt
			| resphead = 200 OK
		</p>
		<pre>Content-Type: text/plain
Content-Length: 22
</pre>
		<p>| respbody =   </p>
		<pre>This is the contents
</pre>
		<p>| explain = On success, the response body contains the raw file contents. A 304 response may be used to indicate an unchanged file when a conditional get is performed (such as using If-None-Match in conjunction with an ETag from a previous response).
			}}</p>
		<h3 id="Getting_file_metadata">Getting file metadata</h3>
		<p>{{Orion/ServerAPI
			| method = GET
			| overview = To retrieve metadata about the file, send a GET request to the file 
			<a href="#location">location</a> with the "?parts=meta" query
			| reqhead = /file/MyProj/myfile.txt?parts=meta HTTP/1.1
		</p>
		<pre>Orion-Version: 1.0
</pre>
		<p>| resphead = 200 OK HTTP/1.1</p>
		<pre>Content-Type: application/json
Content-Length: 132
ETag: "35fd43td3"
</pre>
		<p>| respbody = {</p>
		<pre>"Name" : "myfile.txt",
"Location" : "http://example.com/file/MyProj/myfile.txt",
"ETag" : "35fd43td3",
"Directory" : "false",
"LocalTimeStamp" : "01234345009837",
"Charset" : "UTF-8",
"ContentType" : "text/plain",
"Attributes" : {
  "ReadOnly" : "false",
  "Executable" : "true"
}
}
</pre>
		<p>| explain = On success, the response body contains a representation of the file's metadata. By default the response is a JSON representation.
			}}</p>
		<h3 id="Getting_file_metadata_and_contents">Getting file metadata and contents</h3>
		<p>{{Orion/ServerAPI
			| method = GET
			| overview = Both metadata and file contents can be retrieved in a single request, in order to reduce round trips.
			| reqhead = /file/MyProj/myfile.txt?parts=meta,body HTTP/1.1</p>
		<pre>Orion-Version: 1.0
</pre>
		<p>| resphead = HTTP/1.1 200 OK</p>
		<pre>Content-Type: multipart/related; boundary="BOUNDARY"
ETag: "35fd43td3"
--BOUNDARY
Content-Type: application/json
</pre>
		<p>| respbody = {</p>
		<pre>"Name" : "myfile.txt",
"Location" : "http://example.com/file/MyProj/myfile.txt",
"ETag" : "35fd43td3",
"Directory" : "false",
"LocalTimeStamp" : "01234345009837",
"Charset" : "UTF-8",
"ContentType" : "text/plain",
"Attributes" : {
"ReadOnly" : "false",
"Executable" : "true"
}
}
</pre>
		<pre>--BOUNDARY
Content-Type: text/plain
</pre>
		<pre>This is the contents 
</pre>
		<pre>--BOUNDARY
</pre>
		<p>| explain = The file's metadata and contents are returned as a single multi-part response.
			}}</p>
		<h3 id="Setting_file_contents">Setting file contents</h3>
		<p>{{Orion/ServerAPI
			| overview = The contents of an existing file can be replaced with a simple PUT to the file resource's 
			<a href="#location">location</a>.
			| method = PUT
			| reqhead = /file/MyProj/myfile.txt HTTP/1.1
		</p>
		<pre>Orion-Version: 1.0
If-Match: "35fd43td2"
Content-Type: text/plain
</pre>
		<p>| reqbody = This is the new contents
			| resphead = HTTP/1.1 200 OK </p>
		<pre>Content-Type: application/json
Content-Length: 132
ETag: "35fd43td3"
</pre>
		<p>| respbody = {</p>
		<pre>"Name" : "myfile.txt",
"Location" : "http://example.com/file/MyProj/myfile.txt",
"ETag" : "35fd43td3",
"Directory" : "false",
"LocalTimeStamp" : "01234345009837",
"Charset" : "UTF-8",
"ContentType" : "text/plain",
"Attributes" : {
"ReadOnly" : "false",
"Executable" : "true"
}
}
</pre>
		<p>| explain = Note that changing the contents of a non-existing file is not permitted. Files are created via POST operations rather than a PUT. It is recommended that file changes be accompanied by the ETag of the resource state that was modified in the If-Match header. This prevents overwriting changes made by other clients since the resource was last retrieved. A 412 response indicates that an attempt was made to change a file that has been modified since it was last retrieved.
			}}</p>
		<h3 id="Changing_file_metadata">Changing file metadata</h3>
		<p>{{Orion/ServerAPI
			| overview = A file's metadata can be updated by performing a PUT to the file's location with the ?parts=meta query added. 
			| method = PUT
			| reqhead = /file/&lt;workspaceId&gt;/&lt;pathToFile&gt;?parts=meta HTTP/1.1</p>
		<pre>Orion-Version: 1.0
Content-Type: application/json 
</pre>
		<p>| reqbody = {</p>
		<pre>"Attributes" : {
"ReadOnly" : "true",
}
}
</pre>
		<p>| resphead = 204 OK
			| explain = Note that only the attributes present in the request are modified. I.e., this operation performs a change on the specified attributes of the resource, but leaves all other existing attributes untouched. This prevents a client from overriding attribute values they didn't know about.
			}}</p>
		<h3 id="Changing_metadata_and_contents">Changing metadata and contents</h3>
		<p>{{Orion/ServerAPI
			| overview = A file's metadata and contents can be updated in a single request using a multi-part request body.
			| method = PUT
			| reqhead = /file/&lt;workspaceId&gt;/&lt;pathToFile&gt;?parts=meta,body HTTP/1.1</p>
		<pre>Orion-Version: 1.0
Content-Type: application/json 
</pre>
		<p>| reqbody = {</p>
		<pre>"Name" : "myfile.txt",
"Attributes" : {
"ReadOnly" : "true",
}
}
</pre>
		<pre>--BOUNDARY
Content-Type: text/plain
</pre>
		<pre>This is the new contents 
</pre>
		<pre>--BOUNDARY
</pre>
		<p>| resphead = 204 OK
			| explain = Note that only the attributes present in the request are modified. I.e., this operation performs a change on the specified attributes of the resource, but leaves all other existing attributes untouched. This prevents a client from overriding attribute values they didn't know about.
			}}</p>
		<h2 id="Actions_on_directories">Actions on directories</h2>
		<h3 id="Getting_directory_metadata">Getting directory metadata</h3>
		<p>{{Orion/ServerAPI
			| overview = The default GET behavior for directories is to return a metadata representation of the directory.
			| method = GET
			| reqhead = /file/MyProj/myfolder/ HTTP/1.1</p>
		<pre>Orion-Version: 1.0
</pre>
		<p>| resphead = 200 OK</p>
		<pre>Content-Type: application/json
Content-Length: 232
</pre>
		<p>| respbody = {</p>
		<pre>"Name" : "myfolder",
"Location" : "http://example.com/file/MyProj/myfolder",
"LocalTimeStamp" : "01234345009837",
"Directory" : "true"
"Attributes" : {
"ReadOnly" : "false",
"Executable" : "true"
}
}
</pre>
		<p>| explain = The base behavior on GET does not return information about children. The depth parameter can be used to obtain information on children.
			}}</p>
		<h3 id="Changing_directory_metadata">Changing directory metadata</h3>
		<p>{{Orion/ServerAPI
			| overview = Overview
			| method = PUT
			| reqhead = /file/MyProj/myfolder</p>
		<pre>Orion-Version: 1.0
Content-Length: 44
Content-Type: application/json
</pre>
		<p>| reqbody = {</p>
		<pre>"Attributes" : {
"ReadOnly" : "true",
}
}
</pre>
		<p>| resphead = 204 OK
			| explain = The above example sets the read-only attribute to true, and leaves all other directory attributes unchanged.
			}}</p>
		<h3 id="Listing_directory_contents">Listing directory contents</h3>
		<p>{{Orion/ServerAPI
			| overview = Overview
			| method = GET
			| reqhead = /file/MyProj/myfolder?depth=1 HTTP/1.1</p>
		<pre>Orion-Version: 1.0
</pre>
		<p>| resphead = 200 OK</p>
		<pre>Content-Type: application/json
Content-Length: 132
</pre>
		<p>| respbody = {</p>
		<pre>"Name" : "myfolder",
"Location" : "http://example.com/file/MyProj/myfolder",
"LocalTimeStamp" : "01234345009837",
"Directory" : "true"
"Attributes" : {
"ReadOnly" : "false",
"Executable" : "true"
},
"Children" : [  
{
"Name" : "myfile.txt",
"Location" : "http://example.com/file/MyProj/myfolder/myfile.txt",
"Directory" : "false"
}
]
}
</pre>
		<p>| explain = The depth parameter controls what depth of children to include in the response.
			}}</p>
		<h2 id="Creating_files_and_directories">Creating files and directories</h2>
		<h3 id="Notes_on_POST_method">Notes on POST method</h3>
		<p>In all cases, the POST method is a request to create a resource that is a direct descendant of the request URI. The Slug header, if present, indicates the name of the new resource. If a resource was successfully created, the method returns a 201 response. If an existing resource was replaced, a 200 response is used to indicate success. The Location header of the response indicates the URI of the created or replaced resource.</p>
		<p>The entity body, if present, indicates attributes to be applied to the created resource. 
			Attributes in the request bod must conform to the 
			<a href="http://wiki.eclipse.org/EclipseWeb/Server_API/File_API#JSON_representation_of_files" title="EclipseWeb/Server_API/File_API#JSON_representation_of_files" target="orion_external">file JSON representation</a>. Any attributes that are not present will assume default values. If the name of the new resource is not specified by either the Slug header or by indicating a source resource to be copied or moved, then the entity body must minimally contain the Name attribute.
		</p>
		<p>If the X-Create-Options header is present, it may indicate that the resource to be created is to be copied or moved from some existing resource. In this case the entity body must contain a Location attribute specifying the source resource to be copied or moved. If the copy or move option is specified but there is no location in the entity body, then a response code of 400 is used to indicate a bad request. A 400 request may also indicate an illegal combination of X-Create-Options values (such as "copy,move"). The value of the X-Create-Options field is interpreted as a comma-delimited series of options. Unrecognized options are ignored to allow for compatibility with future versions of this specification.</p>
		<p>A 403 response indicates that the request attempted to copy or move a resource onto itself or a descendant of itself.</p>
		<p>An X-Create-Options value of "no-overwrite" indicates that the operation MUST fail if the resource to be created already exists. If this value is not present then any existing resource will be overwritten. A 412 return code is used to indicate that the "no-overwrite" option was specified and the destination resource already exists.</p>
		<h3 id="Creating_a_directory">Creating a directory</h3>
		<p>{{Orion/ServerAPI
			| overview = Overview
			| method = POST
			| reqhead = /file/MyProj HTTP/1.1</p>
		<pre>Orion-Version: 1.0
Content-Length: 48
Content-Type: application/json
Slug: myfolder
</pre>
		<p>| reqbody = {</p>
		<pre> "Name" : "myfolder",
 "Directory" : "true"
}
</pre>
		<p>| resphead = 201 OK
			| respbody = {</p>
		<pre>"Name" : "myfolder",
"Location" : "http://example.com/file/MyProj/myfolder",
"ETag" : "35fd43td3",
"LocalTimeStamp" : "01234345009837",
"Directory" : "true"
"Attributes" : {
"ReadOnly" : "false",
"Executable" : "true"
}
}
</pre>
		<p>| explain = See 
			<a href="File-API.html#Notes_on_POST_method">Notes on POST method</a> for further details.
			}}
		</p>
		<h3 id="Creating_an_empty_file">Creating an empty file</h3>
		<p>{{Orion/ServerAPI
			| overview = A new file is created by performing a POST against the location of the parent directory the file is to be created in.
			| method = POST
			| reqhead = /file/MyProj/ HTTP/1.1</p>
		<pre>Orion-Version: 1.0
Slug: myfile.txt
</pre>
		<p>| resphead = 201 Created</p>
		<pre>Location: http://example.com/file/MyProj/myfile.txt
ETag: "35fd43td3"
Content-Type: application/json
</pre>
		<p>| respbody = {</p>
		<pre>"Name" : "myfile.txt",
"Location" : "http://example.com/file/MyProj/myfile.txt",
"Charset" : "UTF-8",
"ContentType" : "text/plain",
"LocalTimeStamp" : "01234345009837",
"Directory" : "false"
"Attributes" : {
"ReadOnly" : "false",
"Executable" : "true"
}
}
</pre>
		<p>| explain = The name of the created file is taken from the Slug header value. The response body contains metadata information about the newly created file.
			}}</p>
		<h3 id="Creating_a_file_with_contents">Creating a file with contents</h3>
		<p>Creating a file and providing contents is not currently supported in a single request. The client must first create a file with a POST as in the previous section, and then perform a PUT on the location specified in the POST response to provide file contents.</p>
		<h2 id="Copy.2C_move.2C_and_delete">Copy, move, and delete</h2>
		<h3 id="Deleting_a_file_or_directory">Deleting a file or directory</h3>
		<p>{{Orion/ServerAPI
			| overview = To delete a file or directory, send DELETE to the resource's 
			<a href="#location">location</a>.
			| method = DELETE
			| reqhead = /file/myfile.txt HTTP/1.1
		</p>
		<pre>Orion-Version = 1.0
If-Match: 980sdfhsdf8f
</pre>
		<p>| resphead = 204 OK
			| explain = Use of the If-Match header is recommended to avoid deleting contents that have been modified by another party since the file was last retrieved. Deleting a non-existent resource succeeds with no effect (returns 204 OK).
			}}</p>
		<h3 id="Copying_a_file_or_directory">Copying a file or directory</h3>
		<p>{{Orion/ServerAPI
			| overview = Copying is similar in form to file or directory creation. The post is performed against the parent directory where the new file or directory is to be created. The source of the copy is specified in the request body. The X-Create-Options header differentiates copying from simple file creation.
			| method = POST
			| reqhead = /file/MyProj HTTP/1.1</p>
		<pre>Orion-Version: 1.0
Content-Length: 144
Content-Type: application/json
Slug: destination.txt
X-Create-Options: copy
</pre>
		<p>| reqbody = {</p>
		<pre>"Location" : "http://example.com/file/MyProj/source.txt"
}
</pre>
		<p>| resphead = 201 Created</p>
		<pre>Location: http://example.com/file/MyProj/destination.txt
ETag: "35fd43td3"
Content-Type: application/json
</pre>
		<p>| respbody = {</p>
		<pre>"Name" : "destination.txt",
"Location" : "http://example.com/file/MyProj/destination.txt",
"ETag" : "35fd43td3",
"LocalTimeStamp" : "01234345009837",
"Directory" : "true"
"Attributes" : {
"ReadOnly" : "false",
"Executable" : "true"
}
}
</pre>
		<p>| explain = See 
			<a href="File-API.html#Notes_on_POST_method">Notes on POST method</a> for further details.
			}}
		</p>
		<h3 id="Moving_a_file_or_directory">Moving a file or directory</h3>
		<p>{{Orion/ServerAPI
			| overview = Moving is similar in form to file or directory creation. The post is performed against the parent directory where the new file or directory is to be created. The source of the move is specified in the request body. The X-Create-Options header differentiates moving from simple file creation.
			| method = POST
			| reqhead = /file/MyProj HTTP/1.1</p>
		<pre>Orion-Version: 1.0
Content-Length: 144
Content-Type: application/json
Slug: destination.txt
X-Create-Options: move
</pre>
		<p>| reqbody = {</p>
		<pre>"Location" : "http://example.com/file/MyProj/source.txt"
}
</pre>
		<p>| resphead = 201 Created</p>
		<pre>Location: http://example.com/file/MyProj/destination.txt
ETag: "35fd43td3"
Content-Type: application/json
</pre>
		<p>| respbody = {</p>
		<pre>"Name" : "destination.txt",
"Location" : "http://example.com/file/MyProj/destination.txt",
"ETag" : "35fd43td3",
"LocalTimeStamp" : "01234345009837",
"Directory" : "true"
"Attributes" : {
"ReadOnly" : "false",
"Executable" : "true"
}
}
</pre>
		<p>| explain = See 
			<a href="File-API.html#Notes_on_POST_method">Notes on POST method</a> for further details.
			}}
		</p><hr/>
		<table class="navigation" style="width: 100%;" border="0" summary="navigation">
			<tr>
				<td style="width: 20%" align="left"></td>
				<td style="width: 60%" align="center"></td>
				<td style="width: 20%" align="right">
					<a href="JSON-representations.html" title="JSON representations">
						<img alt="Next" border="0" src="../../../images/next.gif"/>
					</a>
				</td>
			</tr>
			<tr>
				<td style="width: 20%" align="left" valign="top"></td>
				<td style="width: 60%" align="center"></td>
				<td style="width: 20%" align="right" valign="top">JSON representations</td>
			</tr>
		</table>
	</body>
</html>